[[composing-languages-with-bcool-section]]
=== Coordination of Languages with BCOoL
==== What is ((BCOoL))?
((BCOoL)) is a dedicated language to explicitly specify how models conforming to different DSMLs can be coordinated. This enables the integrator to capture the knowledge of integration of systems by a dedicated language. In BCOoL, the specification relies on _Operators_. Once defined, the specification can be used to generate a model of coordination when models are know.

image::http://timesquare.inria.fr/BCOoL/images/bcoolapr.jpg[Overview of the BCOoL approach]

((BCOoL)) is developed on top of the eclipse platform as a set of plugins. More precisely, it is integrated to the GEMOC studio. The GEMOC studio is the integration of various Eclipse Modeling Framework (EMF) based technologies adequate for the specification of executable domain specific modeling languages. BCOoL is itself based on the EMF and its abstract syntax has been developed using Ecore (i.e., the meta-language associated with EMF). The textual concrete syntax has been developed using Xtext, providing advanced editing facilities. 

BCOoL takes advantages of this collaborative environment by adding coordination facilities. In the language workbench, an _integrator_ can develop BCOoL operators to specify coordination patterns between languages, and then a _system_ designer can use these operators in the modeling workbench to coordinate models.


=== Running Example: Coordination of a Coffee Machine Model
To present BCOoL, we develop a simple operator between the TFSM and Activity language. The operator coordinates FSMEvents from the TFSM and Actions from the Activity language by comparing theirs names. 

image::http://timesquare.inria.fr/BCOoL/images/coffeemachine.png[The Heterogeneous Model of a Coffee Machine ] 
The picture illustrates the heterogeneous model of a coffee machine. To coordinate the models, we have to synchronize the activity CoffeeAlgorithm and the TFSM CoffeeCoin by coordinating the corresponding Actions and FSMEvent. In the following, we use the GEMOC studio to develop this operator. We then use it to coordinate the model of a coffee machine.

==== Preparing the Language Workbench
In the language workbench, we need the TFSM and Activity language. For the TFSM language, it is only necessary to go to _File_, _New_, and then _Example_. In the wizard, we select the GEMOC TFSM language. Conversely, to get the activity language, we need to clone the https://github.com/gemoc/activitydiagram[activity repository]. Then, in the workbench, we need to import all the projects from the folders _activitydiagram/dev/gemoc_commons/_ and _activitydiagram/dev/gemoc_concurrent/language_workbench/_. The language workbench should look as in the picture. 

image::http://timesquare.inria.fr/BCOoL/images/coffeemachine0.jpg[Language Workbench]

==== Getting the Modeling Workbench
In the modeling workbench, we import the project _org.gemoc.bcool.example.producttfsmandactivity_ from https://github.com/gemoc/gemoc-studio/tree/master/official_samples/bcool_TFSMAndActivity/modeling_workbench[here]. The second workbench should look as in the picture. The project includes the operator and the models of the coffee machine. 

image::http://timesquare.inria.fr/BCOoL/images/coffeemachine1.jpg[Modeling Workbench]

==== Running the example
To execute the coordinated system, we first need to go to _Debug Configuration_ and configure the *Gemoc Coordinated eXecutable Models* as shown in the picture. 

image::http://timesquare.inria.fr/BCOoL/images/coffeemachine2.jpg[Launch]

Once launched, the engine provides several options to drive the execution of the models. For instance, it enables a system designer to select the next valid execution step. Also, the workbench provides the animation of models. 

image::http://timesquare.inria.fr/BCOoL/images/coffeemachine3.jpg[Launch]

For further information about BCOoL please visit http://timesquare.inria.fr/BCOoL[BCOoL site]. If you are experimenting problems during the compilation of the example, please email to mailto:matias.vara_larsen@inria.fr[me].