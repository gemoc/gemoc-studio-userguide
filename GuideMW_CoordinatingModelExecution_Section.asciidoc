[[modeling-workbench-coordinating-model-execution-section]]
== Coordinating Model Execution
In the modeling workbench, a system designer can use BCOoL operators to automate the coordination of models. In this section, we present as running example the coordination of the heterogeneous model of a Coffee Machine. To coordinate these models, we use the language workbench to build a simple BCOoL operator between the TFSM and Activity Language. Then, in the modeling workbench, we use this operator to coordinate the model of a coffee machine.  

=== Running Example: Coordination of a Coffee Machine Model
To present BCOoL, we develop a simple operator between the TFSM and Activity language. The operator coordinates FSMEvents from the TFSM and Actions from the Activity language by comparing theirs names. 

image::http://timesquare.inria.fr/BCOoL/images/coffeemachine.png[The Heterogeneous Model of a Coffee Machine ] 
The picture illustrates the heterogeneous model of a coffee machine. To coordinate the models, we have to synchronize the activity CoffeeAlgorithm and the TFSM CoffeeCoin by coordinating the corresponding Actions and FSMEvent. In the following, we first use the language workbench to develop this operator. We then use this operator in the modeling workbench to coordinate the model of a coffee machine.

==== Preparing the Language Workbench
In the language workbench, we need the TFSM and Activity language. For the TFSM language, it is only necessary to go to _File_, _New_, and then _Example_. In the wizard, we select the GEMOC TFSM language. Conversely, to get the activity language, we need to clone the https://github.com/gemoc/activitydiagram[activity repository]. Then, in the workbench, we need to import all the projects from the folders _activitydiagram/dev/gemoc_commons/_ and _activitydiagram/dev/gemoc_concurrent/language_workbench/_. The language workbench should look as in the picture. 

image::http://timesquare.inria.fr/BCOoL/images/coffeemachine0.jpg[Language Workbench]

==== Getting the Modeling Workbench
In the modeling workbench, we import the project _org.gemoc.bcool.example.producttfsmandactivity_ from https://github.com/gemoc/gemoc-studio/tree/master/official_samples/bcool_TFSMAndActivity/modeling_workbench[here]. The second workbench should look as in the picture. The project includes the operator and the models of the coffee machine. 

image::http://timesquare.inria.fr/BCOoL/images/coffeemachine1.jpg[Modeling Workbench]

==== Running the example
To execute the coordinated system, we first need to go to _Debug Configuration_ and configure the *Gemoc Coordinated eXecutable Models* as shown in the picture. 

image::http://timesquare.inria.fr/BCOoL/images/coffeemachine2.jpg[Launch]

Once launched, the engine provides several options to drive the execution of the models. For instance, it enables a system designer to select the next valid execution step. Also, the workbench provides the animation of models. 

image::http://timesquare.inria.fr/BCOoL/images/coffeemachine3.jpg[Launch]

For further information about BCOoL please visit http://timesquare.inria.fr/BCOoL[BCOoL site]. If you are experimenting problems during the compilation of the example, please email to mailto:matias.vara_larsen@inria.fr[me].